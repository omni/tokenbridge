---
version: '2.4'
services:
  ui:
    build:
      context: ..
      dockerfile: ui/Dockerfile
    ports:
    - "${REACT_APP_PORT}:${REACT_APP_PORT}"
    env_file: ./.env
    environment: 
      - NODE_ENV=production
      - REACT_APP_COMMON_HOME_BRIDGE_ADDRESS=${COMMON_HOME_BRIDGE_ADDRESS}
      - REACT_APP_COMMON_FOREIGN_BRIDGE_ADDRESS=${COMMON_FOREIGN_BRIDGE_ADDRESS}
      - REACT_APP_COMMON_FOREIGN_RPC_URL=${COMMON_FOREIGN_RPC_URL}
      - REACT_APP_COMMON_HOME_RPC_URL=${COMMON_HOME_RPC_URL}
      - REACT_APP_COMMON_HOME_GAS_PRICE_SUPPLIER_URL=${REACT_APP_COMMON_HOME_GAS_PRICE_SUPPLIER_URL}
      - REACT_APP_COMMON_HOME_GAS_PRICE_SPEED_TYPE=${REACT_APP_COMMON_HOME_GAS_PRICE_SPEED_TYPE}
      - REACT_APP_COMMON_HOME_GAS_PRICE_FALLBACK=${REACT_APP_COMMON_HOME_GAS_PRICE_FALLBACK}
      - REACT_APP_COMMON_HOME_GAS_PRICE_FACTOR=${REACT_APP_COMMON_HOME_GAS_PRICE_FACTOR}
      - REACT_APP_COMMON_FOREIGN_GAS_PRICE_SUPPLIER_URL=${REACT_APP_COMMON_FOREIGN_GAS_PRICE_SUPPLIER_URL}
      - REACT_APP_COMMON_FOREIGN_GAS_PRICE_SPEED_TYPE=${REACT_APP_COMMON_FOREIGN_GAS_PRICE_SPEED_TYPE}
      - REACT_APP_COMMON_FOREIGN_GAS_PRICE_FALLBACK=${REACT_APP_COMMON_FOREIGN_GAS_PRICE_FALLBACK}
      - REACT_APP_COMMON_FOREIGN_GAS_PRICE_FACTOR=${REACT_APP_COMMON_FOREIGN_GAS_PRICE_FACTOR}
    restart: unless-stopped
    entrypoint: yarn start
